# Chapter 10: Admin/Gov Portal (HMS-GOV)

In [Chapter 9: Human-in-the-Loop Oversight](09_human_in_the_loop_oversight_.md) we created a queue and APIs for humans to review AI proposals. Now we’ll build the **Admin/Gov Portal**—the secured control center where officials see AI suggestions, tweak policies, monitor health, and push changes live with full audit trails.

## Why an Admin/Gov Portal?

Think of it as the governor’s mansion of your HMS operations:

- It brings AI‐agent proposals, policy configurations, and system‐health dashboards into one view.  
- Officials can review, modify, and approve process updates (e.g., adjusting CAOC acquisition timelines) with a few clicks.  
- Audit logs, performance metrics, and compliance alerts are front‐and‐center, ensuring all changes meet regulatory standards.

### Central Use Case: CAOC Timeline Adjustment

A Chief Acquisition Officer visits the portal and sees:

1. **New Proposal**: “Reduce contract award timeline from 30 to 20 days,” generated by an AI Agent.  
2. **Metrics Panel**: System‐load and delivery performance over the past 6 months.  
3. **Policy Editor**: Current threshold set to 30 days.

The officer tweaks the timeline to **25 days**, clicks **Approve**, and in seconds the policy updates live—with the action logged for audits.

---

## Key Concepts

1. **Unified Dashboard**  
   One page showing pending proposals, editable policy settings, live charts, and compliance alerts.

2. **Proposal Workflow**  
   Inspect suggestion details, adjust parameters, and approve or reject with click‐through steps.

3. **Policy Configuration**  
   A guided editor for rules and thresholds—no direct coding required.

4. **System Health Monitoring**  
   Real‐time charts and alerts for service uptime, error rates, and performance.

5. **Audit Trail**  
   Every view, tweak, and approval is recorded with user, timestamp, and before/after values.

---

## Getting Started

### 1. Install and Initialize

```bash
npm install hms-gov
```

```javascript
// portal-init.js
const gov = require('hms-gov');
gov.init({
  apiBase: 'https://admin.portal.gov/api',
  authToken: 'Bearer <YOUR_TOKEN>'
});
```

This sets up the Portal client with your backend URL and an authentication token.

### 2. Render the Dashboard

```javascript
// portal-ui.js
import { renderDashboard } from 'hms-gov';

renderDashboard('#root');
```

Add `<div id="root"></div>` to your HTML. The portal UI will inject:

- Pending AI proposals  
- Policy editors  
- Health charts and alerts

---

## Under the Hood: What Happens When You Load and Approve

```mermaid
sequenceDiagram
  participant Admin
  participant UI as PortalUI
  participant API as HMS-GOV API
  participant Mgr as PortalManager
  participant Audit as AuditService

  Admin->>UI: open dashboard
  UI->>API: GET /proposals
  API->>Mgr: fetch pending proposals
  Mgr–>>API: [ {id, suggestion, details}, … ]
  API–>>UI: proposals JSON
  UI–>>Admin: display list

  Admin->>UI: click “Approve”
  UI->>API: POST /proposals/123/approve
  API->>Mgr: approveProposal(123)
  Mgr->>Audit: log approval
  Mgr->>API: 200 OK
  API–>>UI: success
  UI–>>Admin: show confirmation
```

1. **Load**: PortalUI calls `/proposals`.  
2. **Fetch**: `PortalManager` retrieves pending items from the HITL queue.  
3. **Display**: UI lists proposals with “Approve” buttons.  
4. **Approve**: UI posts an approval request.  
5. **Log & Deploy**: Manager logs the action in `AuditService`, updates policy, and responds.

---

## Core Implementation

### config.js

```javascript
// hms-gov/config.js
module.exports = {
  apiBase: process.env.GOV_API_BASE,
  authToken: process.env.GOV_AUTH_TOKEN
};
```

Stores the API endpoint and auth token, loaded from environment variables.

### manager.js

```javascript
// hms-gov/manager.js
const { apiBase, authToken } = require('./config');

class PortalManager {
  getPending() {
    return fetch(`${apiBase}/proposals`, {
      headers: { Authorization: authToken }
    }).then(res => res.json());
  }

  approveProposal(id) {
    return fetch(`${apiBase}/proposals/${id}/approve`, {
      method: 'POST',
      headers: { Authorization: authToken }
    });
  }
}

module.exports = new PortalManager();
```

- `getPending()` fetches all waiting proposals.  
- `approveProposal(id)` posts an approval action.

### routes.js

```javascript
// hms-gov/server/routes/admin.js
const router = require('express').Router();
const mgr = require('../manager');

router.get('/proposals', (req, res) =>
  mgr.getPending().then(list => res.json(list))
);

router.post('/proposals/:id/approve', (req, res) =>
  mgr.approveProposal(req.params.id).then(() => res.sendStatus(200))
);

module.exports = router;
```

Two simple endpoints to list and approve proposals.

---

## Conclusion

You’ve now built **Admin/Gov Portal (HMS-GOV)**—a unified interface for decision‐makers to review AI proposals, adjust policies, monitor system health, and maintain full audit trails. 

Up next, we’ll show you how to define and enforce those policies in code with the  
[Policy & Process Module](11_policy___process_module_.md).

---

Generated by [AI Codebase Knowledge Builder](https://github.com/The-Pocket/Tutorial-Codebase-Knowledge)