# HMS Foreign Function Interface (FFI)

This directory contains documentation and tracking for the HMS FFI implementation across all system components.

## FFI Implementation Status

![FFI Coverage](https://img.shields.io/endpoint?url=https://github.com/HardisonCo/hms/badges/ffi_coverage_badge.json)

For detailed implementation status, see [HMS-FFI-IMPLEMENTATION-TRACKER.md](../HMS-FFI-IMPLEMENTATION-TRACKER.md).

## Implementation Phases

We're following a phased implementation approach across all components:

### Phase 1: Critical Path (âš¡ 2 weeks)
Components: A2A, AGT, AGX, LLM, MCP, SYS, CDF, API, EMR

### Phase 2: High Business Value (2 weeks)
Components: ABC, ACT, EHR, KNO, NFO, OMS, RED, SKL, UHC

### Phase 3: Medium & Low (3 weeks)
All remaining components (CUR, EDU, ESQ, ..., UTL)

### Phase 4: Polish + GA Self-Healing (1 week)
- GA engine fed failing tests & fuzz cases
- Economic engine run to test theorem-prover FFI calls
- Close any code-coverage or latency SLA gaps

## Component Documentation

Each component has its own FFI documentation page:

<!-- This section will be auto-generated by the CI workflow -->

## Key Concepts

- **FFI (Foreign Function Interface)**: Allows code written in one programming language to call code written in another language.
- **Protocol Buffers**: Used as our IDL (Interface Definition Language) for defining service interfaces and message structures.
- **Language Bindings**: Code generated for different programming languages to interact with the HMS components.

## Working with FFI Components

### Adding New Proto Files

1. Create your `.proto` file in the component's `proto/` directory following the naming pattern `hms/<component>/v1/<service>.proto`.
2. Run `scripts/discover_components.py` to update the component inventory.
3. Generate bindings using the appropriate tools for each language.

### Testing Bindings

Each binding language has its own testing requirements. At a minimum, tests should cover:

1. Round-trip serialization of message types
2. Service method invocation
3. Error handling

## CI/CD Integration

The FFI implementation is continuously monitored by two GitHub Actions workflows:

1. `ffi-status.yml`: Updates the implementation tracker based on component discovery.
2. `ffi-binding-quality.yml`: Tests the quality of language bindings and updates status.

## Key Documents

- [HMS-FFI-ARCHITECTURE.md](../HMS-FFI-ARCHITECTURE.md): Overall FFI architecture design.
- [HMS-FFI-API-SPECIFICATION.md](../HMS-FFI-API-SPECIFICATION.md): API specifications for FFI components.
- [HMS-FFI-INTEGRATION-STRATEGY.md](../HMS-FFI-INTEGRATION-STRATEGY.md): Strategy for integrating FFI across HMS components.
- [HMS-FFI-LANGUAGE-BINDINGS.md](../HMS-FFI-LANGUAGE-BINDINGS.md): Guidelines for language-specific binding implementations.